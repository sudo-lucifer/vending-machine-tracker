[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=sudo-lucifer_vending-machine-tracker&metric=coverage)](https://sonarcloud.io/summary/new_code?id=sudo-lucifer_vending-machine-tracker)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=sudo-lucifer_vending-machine-tracker&metric=sqale_rating)](https://sonarcloud.io/summary/new_code?id=sudo-lucifer_vending-machine-tracker)

## Vending Machine Tracking Application

### Project structure
1. ``vending_machine_backend``: main application
2. ``vending_machine_management``: application to handle stock, product, vending manchine
   1. **migrations**: directory to keep all database model migrations (autogenerated by django)
   2. **models**: directory to keep all database model
   3. **serializer**: directory to keep all request and response checker
   4. **tests**: directory to keep all API tests and mock test database set up
   5. **urls**: directory to keep all url patterns
   6. **views**: directory to keep all APIs

### Requirement
<ul>
    <li>Poetry version > 1.0.0 for virtual environment</li>
    <li>pre-commit for linting before pushing to repository</li>
    <li>docker for postgresSQL database</li>
</ul>

### Set up `pre-commit` for linting
1. Install pre-commit ``pip install pre-commit``
2. Run ``pre-commit install``

### Set up poetry as virtual environment
1. install poetry
``curl -sSL https://install.python-poetry.org | python3 -``
2. Run ``poetry install``
3. To run virtual environment, ``poetry shell``

### Set up database via docker
Run ``docker compose up -d``

To stop running database: ``docker compose down`` or stop container from docker UI

### Running project
1. migrate database model (make sure database container is running) by ``./manage.py migrate`` or `python manage.py migrate`
2. run server on port 8000
``./manage.py runserver 8000`` or ``python manage.py runserver 8000``

### Run test
To run test, ``pytest`` or ``./manage.py test``

To testing without postgres database, run ``export DJANGO_DB_ENGINE=django.db.backends.sqlite3
``
